<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Products - Shree Murugan Sweets & Savouries</title>

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --brand:#ffb703;
    --brand-dark:#fb8500;
    --accent:#e63946;
  }
  body{
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(180deg,#fff9f0 0%, #ffe7b8 100%);
    margin-top:80px;
    color:#222;
  }
  .navbar { background: rgba(52,58,64,0.95); }
  .navbar-brand { color: #ffc107 !important; font-weight:700; }
  .product-card { position:relative; border-radius:14px; box-shadow:0 6px 18px rgba(0,0,0,0.12); overflow:hidden; display:flex; flex-direction:column; }
  .card-img-top { height:230px; object-fit:cover; }
  .variant-options { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-bottom:8px; }
  .variant-btn {
    border:1px solid rgba(0,0,0,0.06);
    background:#fff;
    padding:6px 10px;
    border-radius:8px;
    cursor:pointer;
    font-size:14px;
    display:inline-flex;
    align-items:center;
    gap:8px;
    min-width:110px;
    justify-content:center;
  }
  .variant-btn .original { text-decoration:line-through; color:#777; font-size:13px; }
  .variant-btn .discount { color:var(--accent); font-weight:700; font-size:15px; }
  .variant-btn.active { background:var(--brand); color:#fff; border-color:var(--brand); transform:translateY(-3px); }
  .btn-warning { background:var(--brand); border:none; font-weight:600; }
  .btn-warning:hover { background:var(--brand-dark); transform:scale(1.02); }

  /* Cart Box */
  .cart-box {
    position: fixed;
    inset: 0; /* Full screen */
    background: #fff;
    border: none;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
    padding: 40px 20px;
    overflow-y: auto;
    z-index: 2000;
    transform: translateY(100%);
    transition: transform 0.4s ease;
    border-radius: 0;
  }
  .cart-box.open { transform: translateY(0); }
  .cart-toggle-btn {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background: var(--brand, #ffb703);
    color: #fff;
    font-weight: 600;
    border-radius: 50%;
    padding: 14px 18px;
    font-size: 20px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border: none;
    z-index: 2100;
  }

  #cartItems { list-style:none; padding-left:0; margin-bottom:0; }
  #cartItems li { display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px dashed #eee; font-size:14px; }
  .cart-remove-btn { background:none; border:none; color:red; font-weight:700; font-size:18px; cursor:pointer; }
  .price-strong { font-weight:700; }
  .total-payable { margin-top:14px; font-size:15px; }
  .total-payable div { display:flex; justify-content:space-between; margin:6px 0; }
  footer { background:#3e2723; color:#fff; text-align:center; padding:18px 0; margin-top:40px; }
  .floating-call { position:fixed; right:20px; bottom:100px; z-index:999; }
  .floating-call img { width:56px; border-radius:50%; box-shadow:0 6px 18px rgba(0,0,0,0.2); margin-top: 200px;}

  /* Diwali badge */
  .diwali-badge {
    position: absolute;
    top: 18px;
    left: -48px;
    background: linear-gradient(45deg, #ff6600, #ff3300);
    color: #fff;
    font-weight: 800;
    padding: 8px 65px;
    transform: rotate(-30deg);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    font-size: 15px;
    text-align: center;
    z-index: 10;
    display: flex;
    justify-content: center;
    align-items: center;
    letter-spacing: 0.8px;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4);
    border-radius: 4px;
  }
  .glow-text {
    color: black;
    font-weight: 700;
  }
  .glow-date {
    color: #ff0000;
    animation: glowPulse 1.5s ease-in-out infinite;
  }
  @keyframes glowPulse {
    0% { text-shadow: 0 0 5px #ff5959, 0 0 10px #ff0000; }
    50% { text-shadow: 0 0 20px #ff5959, 0 0 30px #ff0000; }
    100% { text-shadow: 0 0 5px #ff5959, 0 0 10px #ff0000; }
  }

  /* Processing message */
  #processingMsg {
    display:none;
    text-align:center;
    margin-top:15px;
    font-weight:700;
    color:blue;
  }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-md navbar-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="index.html">Shree Murugan Sweets & Savouries</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navCollapse">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navCollapse">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link active" href="product.html">Products</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Products Section -->
<div class="container my-5">
  <h2 class="text-center fw-bold">Our Delicious Products</h2>
  <p class="text-center fw-bold mb-4 glow-text">
    ü™î <span style="color:blue;">Diwali orders can be taken till</span> 
    <span class="glow-date">16th October</span> üéâ
  </p>
  <div class="row g-4">
    <!-- Product cards go here (same as your previous code, omitted for brevity) -->
    <!-- Example for one product -->
    <div class="col-md-4 d-flex product-item">
      <div class="card product-card w-100 text-center p-0">
        <div class="diwali-badge" >Diwali Special</div>
        <img src="mysore pak1.jpg" class="card-img-top" alt="Ghee Mysore Pak">
        <div class="card-body">
          <h5 class="card-title">Ghee Mysore Pak</h5>
          <p class="text-muted small">Rich, golden, melt-in-the-mouth delight made with pure ghee ‚Äî a royal treat from Mysuru!</p>
          <div class="variant-options" data-product="Ghee Mysore Pak">
            <button class="variant-btn" data-variant="¬Ω kg" data-price="320" data-original="350">
              <span class="discount">Pack - ‚Çπ320 /- 500gms</span>
              <span class="original">‚Çπ350</span>
            </button>
            <button class="variant-btn" data-variant="1 kg" data-price="600" data-original="650">
              <span class="discount">Pack - ‚Çπ600 /- kg</span>
              <span class="original">‚Çπ650</span>
            </button>
          </div>
          <button class="btn btn-warning add-to-cart" data-product="Ghee Mysore Pak">Add to Cart</button>
        </div>
      </div>
    </div>
    
    <!-- Mysore Pak --> 
     <div class="col-md-4 d-flex product-item"> 
      <div class="card product-card w-100 text-center p-0"> 
        <img src="mp1.jpg" class="card-img-top" alt="Mysore Pak">
         <div class="card-body"> 
          <h5 class="card-title">Mysore Pak</h5> 
          <p class="text-muted small">Classic Mysore Pak with a firm, traditional texture and authentic gram flour aroma.</p> 
          <div class="variant-options" data-product="Mysore Pak"> 
            <button class="variant-btn" data-variant="¬Ω kg" data-price="260" data-original="280">
              <span class="discount">Pack - ‚Çπ260 /- 500gms</span>
              <span class="original">‚Çπ280</span>
            </button> <button class="variant-btn" data-variant="1 kg" data-price="475" data-original="500">
              <span class="discount">Pack - ‚Çπ475 /- kg</span><span class="original">‚Çπ500</span>
            </button> 
          </div> 
          <button class="btn btn-warning add-to-cart" data-product="Mysore Pak">Add to Cart</button> 
        </div> 
      </div> 
    </div> 
              <!-- Laddu --> 
               <div class="col-md-4 d-flex product-item"> 
                <div class="card product-card w-100 text-center p-0"> 
                  <img src="Laddu1.jpg" class="card-img-top" alt="Laddu"> 
                  <div class="card-body"> <h5 class="card-title">Laddu</h5> 
                    <p class="text-muted small">Soft, rich laddus made with pure ghee and gram flour ‚Äî a true taste of tradition.</p> 
                    <div class="variant-options" data-product="Laddu"> 
                      <button class="variant-btn" data-variant="¬Ω kg" data-price="270" data-original="300">
                        <span class="discount">Pack - ‚Çπ270 /- 500gms</span>
                        <span class="original">‚Çπ300</span></button> 
                        <button class="variant-btn" data-variant="1 kg" data-price="500" data-original="550">
                          <span class="discount">Pack - ‚Çπ500 /- kg</span>
                          <span class="original">‚Çπ550</span></button> </div> 
                          <button class="btn btn-warning add-to-cart" data-product="Laddu">Add to Cart</button> 
                        </div> 
                      </div> 
                    </div> 
                    <!-- Badhusha --> 
                     <div class="col-md-4 d-flex product-item"> 
                      <div class="card product-card w-100 text-center p-0"> 
                        <img src="Badhusha.jpeg" class="card-img-top" alt="Badhusha"> 
                        <div class="card-body"> <h5 class="card-title">Badhusha</h5> 
                          <p class="text-muted small">Flaky, soft, and mildly sweet ‚Äî Baadhusha that melts in your mouth.</p> 
                          <div class="variant-options" data-product="Badhusha"> 
                            <button class="variant-btn" data-variant="¬Ω kg" data-price="270" data-original="300">
                              <span class="discount">Pack - ‚Çπ270 /- 500gms</span>
                              <span class="original">‚Çπ300</span></button> 
                              <button class="variant-btn" data-variant="1 kg" data-price="500" data-original="550">
                                <span class="discount">Pack - ‚Çπ500 /- kg</span><span class="original">‚Çπ550</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="Badhusha">Add to Cart</button> </div> </div> </div> <!-- Adhirasam --> <div class="col-md-4 d-flex product-item"> <div class="card product-card w-100 text-center p-0"> <div class="diwali-badge" >Diwali Special</div> <img src="adhirasam.jpeg" class="card-img-top" alt="Adhirasam"> <div class="card-body"> <h5 class="card-title">Adhirasam</h5> <p class="text-muted small">Traditional Tamil sweet made from jaggery and rice flour ‚Äî soft & chewy.</p> <div class="variant-options" data-product="Adhirasam"> <button class="variant-btn" data-variant="Big" data-price="75" data-original="90"><span class="discount">Big - ‚Çπ75 /- piece</span><span class="original">‚Çπ90</span></button> <button class="variant-btn" data-variant="¬Ω kg" data-price="270" data-original="300"><span class="discount">Pack - ‚Çπ270 /- 500gms</span><span class="original">‚Çπ300</span></button> <button class="variant-btn" data-variant="1 kg" data-price="500" data-original="550"><span class="discount">Pack - ‚Çπ500 /- kg</span><span class="original">‚Çπ550</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="Adhirasam">Add to Cart</button> </div> </div> </div> <!-- Murukku --> <div class="col-md-4 d-flex product-item"> <div class="card product-card w-100 text-center p-0"> <img src="murukku1.jpg" class="card-img-top" alt="Murukku"> <div class="card-body"> <h5 class="card-title">Murukku</h5> <p class="text-muted small">Crunchy and spiral-shaped South Indian snack ‚Äî perfect with evening tea!</p> <div class="variant-options" data-product="Murukku"> <button class="variant-btn" data-variant="5 Vari" data-price="50" data-original="60"><span class="discount">5 Vari - ‚Çπ50 /- piece</span><span class="original">‚Çπ60</span></button> <button class="variant-btn" data-variant="7 Vari" data-price="70" data-original="80"><span class="discount">7 Vari - ‚Çπ70 /- piece</span><span class="original">‚Çπ80</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="Murukku">Add to Cart</button> </div> </div> </div> <!-- Mixture --> <div class="col-md-4 d-flex product-item"> <div class="card product-card w-100 text-center p-0"> <img src="mixture1.jpg" class="card-img-top" alt="Mixture"> <div class="card-body"> <h5 class="card-title">Mixture</h5> <p class="text-muted small">Crunchy combo of sev, boondi, nuts and spices ‚Äî perfect savory mix!</p> <div class="variant-options" data-product="Mixture"> <button class="variant-btn" data-variant="¬Ω kg" data-price="270" data-original="300"><span class="discount">Pack - ‚Çπ270 /- 500gms</span><span class="original">‚Çπ300 </span></button> <button class="variant-btn" data-variant="1 kg" data-price="500" data-original="550"><span class="discount">Pack - ‚Çπ500 /- kg</span><span class="original">‚Çπ550</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="Mixture">Add to Cart</button> </div> </div> </div> <!-- Special Mixture (Diwali Special) --> <div class="col-md-4 d-flex product-item"> <div class="card product-card w-100 text-center p-0"> <div class="diwali-badge">Diwali Special</div> <img src="splmixture1.jpg" class="card-img-top" alt="Special Mixture"> <div class="card-body"> <h5 class="card-title">Special Mixture</h5> <p class="text-muted small">Premium mixture with cashews, curry leaves & bold spices!</p> <div class="variant-options" data-product="Special Mixture"> <button class="variant-btn" data-variant="¬Ω kg" data-price="320" data-original="350"><span class="discount">Pack - ‚Çπ320 /- 500gms</span><span class="original">‚Çπ350</span></button> <button class="variant-btn" data-variant="1 kg" data-price="600" data-original="650"><span class="discount">Pack - ‚Çπ600 /- kg</span><span class="original">‚Çπ650</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="Special Mixture">Add to Cart</button> </div> </div> </div> <!-- Thattai --> <div class="col-md-4 d-flex product-item"> <div class="card product-card w-100 text-center p-0"> <img src="thattai1.jpg" class="card-img-top" alt="Thattai"> <div class="card-body"> <h5 class="card-title">Thattai</h5> <p class="text-muted small">Crispy rice flour discs seasoned with spices ‚Äî a crunchy delight!</p> <div class="variant-options" data-product="Thattai"> <button class="variant-btn" data-variant="¬Ω kg" data-price="250" data-original="280"><span class="discount">Pack - ‚Çπ250/- 500gms</span><span class="original">‚Çπ280</span></button> <button class="variant-btn" data-variant="1 kg" data-price="450" data-original="480"><span class="discount">Pack - ‚Çπ450 /- kg</span><span class="original">‚Çπ480</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="Thattai">Add to Cart</button> </div> </div> </div> <!-- Ribbon Pakkoda (Diwali Special) --> <div class="col-md-4 d-flex product-item"> <div class="card product-card w-100 text-center p-0"> <div class="diwali-badge">Diwali Special</div> <img src="ribbon pakoda1.jpg" class="card-img-top" alt="Ribbon Pakkoda"> <div class="card-body"> <h5 class="card-title">Ribbon Pakkoda</h5> <p class="text-muted small">Premium mixture with cashews, curry leaves & bold spices!</p> <div class="variant-options" data-product="Ribbon Pakkoda"> <button class="variant-btn" data-variant="¬Ω kg" data-price="320" data-original="350"><span class="discount">Pack - ‚Çπ270 /- 500gms</span><span class="original">‚Çπ350</span></button> <button class="variant-btn" data-variant="1 kg" data-price="600" data-original="650"><span class="discount">Pack - ‚Çπ500 /- kg</span><span class="original">‚Çπ650</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="Ribbon Pakkoda">Add to Cart</button> </div> </div> </div> <!-- 2 Vari Murukku --> <div class="col-md-4 d-flex product-item"> <div class="card product-card w-100 text-center p-0"> <img src="2 vari1.jpg" class="card-img-top" alt="2 Vari Murukku"> <div class="card-body"> <h5 class="card-title">2 Vari Murukku</h5> <p class="text-muted small">Double-layered crispy murukku with authentic homemade flavor!</p> <div class="variant-options" data-product="2 Vari Murukku"> <button class="variant-btn" data-variant="¬Ω kg" data-price="250" data-original="280"><span class="discount">Pack - ‚Çπ250 /- 500gms</span><span class="original">‚Çπ280</span></button> <button class="variant-btn" data-variant="1 kg" data-price="450" data-original="500"><span class="discount">Pack - ‚Çπ450 /- kg</span><span class="original">‚Çπ500</span></button> </div> <button class="btn btn-warning add-to-cart" data-product="2 Vari Murukku">Add to Cart</button> </div> </div> </div> </div> </div> </div>

<!-- Cart -->
<button class="cart-toggle-btn">üõí Cart</button>
<div class="cart-box">
  <h4>Your Cart</h4>
  <ul id="cartItems"></ul>

  <div class="row g-3 mt-3">
    <div class="col-md-6">
      <label class="form-label">Name</label>
      <input id="userName" class="form-control" placeholder="Enter your name" />
    </div>
    <div class="col-md-6">
      <label class="form-label">Phone Number</label>
      <input id="userPhone" class="form-control" placeholder="Enter phone (10 digits)" />
    </div>
    <div class="col-12">
      <label class="form-label">Delivery Address</label>
      <input id="fullAddress" class="form-control" placeholder="Enter full address" />
    </div>
    <div class="mb-3">
      <input type="text" id="pincode" placeholder="6-digit pincode" class="form-control" />
    </div>
    <div class="mb-3">
      <input type="date" id="deliveryDate" class="form-control" />
    </div>
  </div>

<p class="text-center mt-2 fw-bold" style="color:#ff0000; font-size:16px;">
  Payment can be done at the time of delivery.
</p>


  <div class="total-payable">
    <div><span>Subtotal:</span> <span class="price-strong">‚Çπ<span id="subTotal">0</span></span></div>
    <div><span>Delivery:</span> <span class="price-strong">‚Çπ<span id="deliveryCharge">0</span></span></div>
    <div style="font-weight:700;"><span>Total:</span> <span class="price-strong">‚Çπ<span id="grandTotal">0</span></span></div>
  </div>

  <div id="processingMsg">‚è≥ Processing your order...</div>

  <button id="checkoutBtn" class="btn btn-success w-100 mt-3">Checkout</button>
</div>

<!-- Success Modal -->
<div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-4">
      <h4 class="text-success fw-bold mb-2">üéâ Order Placed Successfully!</h4>
      <p>Thank you for shopping with Shree Murugan Sweets & Savouries!</p>
      <button id="successOkBtn" class="btn btn-success" data-bs-dismiss="modal">OK</button>
    </div>
  </div>
</div>

<!-- Footer -->
<footer>
  <p>&copy; 2025 Shree Murugan Sweets & Savouries. All rights reserved.</p>
  <p>
    <a href="https://www.instagram.com/raju_180578" target="_blank">
      <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" width="28" style="margin-left:15px;">
    </a>
    <a href="https://wa.me/919600185511" target="_blank">
      <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" width="28" style="margin-left:15px;">
    </a>
  </p>
</footer>
<!-- Floating Call Button -->
<a href="tel:+919600185511" class="floating-call">
  <img src="call icon.png" alt="Call Us">
</a>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzryLevSFyPtA9DCiAhNWumwauMFBLq121i0natO7sJmUt1vQu4SVZ_LgX6JyzqsN3IkQ/exec";

let cart = JSON.parse(localStorage.getItem('cart')) || [];
let deliveryCharge = 0;


function formatINR(n){ return n; }

// Variant button behavior
document.querySelectorAll('.variant-options').forEach(container=>{
  container.addEventListener('click', (e)=>{
    const btn = e.target.closest('.variant-btn');
    if(!btn) return;
    container.querySelectorAll('.variant-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
  });
});

// Add to Cart
document.querySelectorAll('.add-to-cart').forEach(btn => {
  btn.addEventListener('click', () => {
    const product = btn.dataset.product;
    const container = btn.closest('.card').querySelector('.variant-options');
    if (!container) { alert('No variants found'); return; }
    const active = container.querySelector('.variant-btn.active');
    if (!active) { alert(`Please select a variant for ${product}!`); return; }

    const variant = active.dataset.variant;
    const price = parseInt(active.dataset.price, 10);

    const existing = cart.find(i => i.product === product && i.variant === variant);
    if (existing) {
      existing.qty += 1;
      existing.totalPrice = existing.qty * existing.price;
    } else {
      cart.push({ product, variant, price, qty: 1, totalPrice: price });
    }

    saveAndUpdate();
    active.classList.remove('active');

    btn.textContent = "Added ‚úÖ";
    btn.disabled = true;
    setTimeout(() => {
      btn.textContent = "Add to Cart";
      btn.disabled = false;
    }, 1000);
  });
});

// Update Cart UI
function updateCartUI(){
  const cartList = document.getElementById('cartItems');
  const subTotalEl = document.getElementById('subTotal');
  const deliveryEl = document.getElementById('deliveryCharge');
  const grandEl = document.getElementById('grandTotal');

  cartList.innerHTML = '';
  let total = 0;

  cart.forEach((item, idx)=>{
    total += item.price * item.qty;
    const li = document.createElement('li');
    li.innerHTML = `<div><strong>${item.product}</strong> (${item.variant})</div>
      <div>
        ‚Çπ${item.price * item.qty}
        <input type="number" class="cart-qty form-control d-inline-block" style="width:70px; margin-left:8px;" min="1" value="${item.qty}" data-i="${idx}">
        <button class="cart-remove-btn" data-i="${idx}">&times;</button>
      </div>`;
    cartList.appendChild(li);
  });

  document.querySelectorAll('.cart-qty').forEach(inp=>{
    inp.addEventListener('input', ()=>{
      const i = parseInt(inp.dataset.i,10);
      const q = parseInt(inp.value,10);
      if(isNaN(q) || q < 1) return;
      cart[i].qty = q;
      cart[i].totalPrice = cart[i].price * q;
      saveAndUpdate();
    });
  });

  document.querySelectorAll('.cart-remove-btn').forEach(b=>{
    b.addEventListener('click', ()=>{
      const i = parseInt(b.dataset.i,10);
      cart.splice(i,1);
      saveAndUpdate();
    });
  });

  subTotalEl.textContent = total;
  deliveryEl.textContent = deliveryCharge;
  grandEl.textContent = total + deliveryCharge;
}

function saveAndUpdate(){
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCartUI();
}
updateCartUI();

// Pincode delivery charge
document.getElementById('pincode').addEventListener('input', e=>{
  const val = e.target.value.replace(/\D/g,'').slice(0,6);
  e.target.value = val;
  if(val.length === 6){
    if(val.startsWith('6')){
      const x = val[3];
      deliveryCharge = (x==='0' || x==='1') ? 50 : (x==='2'||x==='3') ? 100 : (x==='4'||x==='5') ? 150 : 200;
    } else deliveryCharge = 0;
  } else deliveryCharge = 0;
  saveAndUpdate();
});

// Phone numeric
document.getElementById('userPhone').addEventListener('input', e=>{
  e.target.value = e.target.value.replace(/\D/g,'').slice(0,10);
});

// Min delivery date
document.getElementById('deliveryDate').min = new Date().toISOString().split('T')[0];

// Checkout
document.getElementById('checkoutBtn').addEventListener('click', async () => {
  if (cart.length === 0) { alert('Cart is empty!'); return; }

  const name = document.getElementById('userName').value.trim();
  const phone = document.getElementById('userPhone').value.trim();
  const addr = document.getElementById('fullAddress').value.trim();
  const pin = document.getElementById('pincode').value.trim();
  const date = document.getElementById('deliveryDate').value;

  if (!name || !phone || !addr || !pin || !date) { alert('Please fill all details!'); return; }
  if (phone.length !== 10) { alert('Phone must be 10 digits'); return; }

  const subTotal = document.getElementById('subTotal').textContent;
  const total = document.getElementById('grandTotal').textContent;
  const summary = cart.map(i => `${i.product} - ${i.variant} √ó ${i.qty} = ‚Çπ${i.price * i.qty}`).join('\n');

  const data = {
    Name: name,
    Phone: phone,
    Address: addr,
    Pincode: pin,
    DeliveryDate: date,
    Subtotal: subTotal,
    DeliveryCharge: deliveryCharge,
    Total: total,
    OrderDetails: summary
  };

  // Show processing
  document.getElementById('processingMsg').style.display = 'block';

  try {
    await fetch(WEB_APP_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(data) });

    cart = [];
    deliveryCharge = 0;
    saveAndUpdate();
    document.querySelectorAll('input').forEach(inp => inp.value = '');
    document.querySelectorAll('.variant-btn').forEach(b => b.classList.remove('active'));

    document.getElementById('processingMsg').style.display = 'none';
    cartBox.classList.remove('open');
    document.body.style.overflow = '';

    new bootstrap.Modal(document.getElementById('successModal')).show();
  } catch (err) {
    console.error(err);
    document.getElementById('processingMsg').style.display = 'none';
    alert('‚ö†Ô∏è Error sending order. Please try again.');
  }
});

// Success modal -> redirect
document.getElementById('successOkBtn').addEventListener('click', () => {
  window.location.href = 'index.html';
});

// Cart toggle
const cartBox = document.querySelector('.cart-box');
const toggleBtn = document.querySelector('.cart-toggle-btn');
toggleBtn.addEventListener('click', () => {
  cartBox.classList.toggle('open');
  document.body.style.overflow = cartBox.classList.contains('open') ? 'hidden' : '';
});
// ‚úÖ Set minimum delivery date = 2 days after today (safe placement)
document.addEventListener('DOMContentLoaded', () => {
  const deliveryInput = document.getElementById('deliveryDate');
  if (deliveryInput) {
    const today = new Date();
    const minDate = new Date(today);
    minDate.setDate(today.getDate() + 2); // Add 2 days
    deliveryInput.min = minDate.toISOString().split('T')[0];
  }
});

</script>
</body>
</html>
